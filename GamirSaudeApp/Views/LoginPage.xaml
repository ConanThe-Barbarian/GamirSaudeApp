<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:GamirSaudeApp.ViewModels"
             x:Class="GamirSaudeApp.Views.LoginPage"
             x:DataType="viewmodels:LoginViewModel"
             Shell.NavBarIsVisible="False"
             BackgroundColor="White">

    <ScrollView>
        <Grid RowDefinitions="Auto, Auto, *" Padding="30" VerticalOptions="Center">

            <Image Grid.Row="0"
                   Source="logo_login.png" 
                   HeightRequest="150"
                   HorizontalOptions="Center"
                   Margin="0,40,0,20" />

            <VerticalStackLayout Grid.Row="1" Spacing="5" Margin="0,0,0,30">
                <Label Text="Bem-Vindo"
                       FontSize="24"
                       FontAttributes="Bold"
                       TextColor="#0098DA" 
                       HorizontalOptions="Center" />

                <Label Text="insira seus dados para acessar sua conta"
                       FontSize="14"
                       TextColor="#666666"
                       HorizontalOptions="Center" />
            </VerticalStackLayout>

            <VerticalStackLayout Grid.Row="2" Spacing="15">

                <Border StrokeShape="RoundRectangle 15"
                        StrokeThickness="0"
                        BackgroundColor="#EFF4FF"
                        HeightRequest="50"
                        Padding="15,0">
                    <Entry Text="{Binding Cpf}"
                           Placeholder="cpf"
                           PlaceholderColor="#8EA6CC"
                           TextColor="#0098DA"
                           Keyboard="Numeric"
                           VerticalOptions="Center" />
                </Border>

                <Border StrokeShape="RoundRectangle 15"
                        StrokeThickness="0"
                        BackgroundColor="#EFF4FF"
                        HeightRequest="50"
                        Padding="15,0">
                    <Grid ColumnDefinitions="*, Auto">
                        <Entry Grid.Column="0"
                               Text="{Binding Senha}"
                               Placeholder="Senha"
                               PlaceholderColor="#8EA6CC"
                               TextColor="#0098DA"
                               IsPassword="{Binding IsPasswordHidden}"
                               VerticalOptions="Center" />

                        <ImageButton Grid.Column="1"                                  
                                     Source="{Binding EyeIconSource}"
                                     Command="{Binding TogglePasswordCommand}"
                                     HeightRequest="20"
                                     WidthRequest="20"
                                     Opacity="0.6"
                                     VerticalOptions="Center"/>
                    </Grid>
                </Border>


                <BoxView HeightRequest="10" Color="Transparent"/>

                <Button Text="Entrar"
                        Command="{Binding LoginCommand}"
                        BackgroundColor="#0098DA"
                        TextColor="White"
                        FontAttributes="Bold"
                        CornerRadius="25"
                        HeightRequest="50"
                        IsEnabled="{Binding IsNotBusy}"/>

                <Button Text="Cadastre-Se"
                        Command="{Binding NavigateToRegisterCommand}"
                        BackgroundColor="#D6E4FF"
                        TextColor="#0098DA"
                        FontAttributes="Bold"
                        CornerRadius="25"
                        HeightRequest="50"
                        IsEnabled="{Binding IsNotBusy}"/>

                <ActivityIndicator IsRunning="{Binding IsBusy}" 
                                   IsVisible="{Binding IsBusy}"
                                   Color="#0098DA"
                                   HorizontalOptions="Center"/>

                <Label Text="Esqueceu sua senha?"
                       TextColor="#0098DA"
                       FontSize="13"
                       HorizontalOptions="Center"
                       Margin="0,-5,0,0">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding ForgotPasswordCommand}" />
                    </Label.GestureRecognizers>
                </Label>

            </VerticalStackLayout>
        </Grid>
    </ScrollView>
</ContentPage>